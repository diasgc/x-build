#!/bin/bash

lib='uavs3d'
dsc='AVS3 decoder which supports AVS3-P2 baseline profile.'
lic='Other'
src='https://github.com/uavs3/uavs3d.git'
cfg='cmake'
eta='80'

cmake_static='BUILD_STATIC_LIBS'
#cfg_shared=''
#cfg_bin=''

dev_bra='master'
dev_vrs='1.1.71'
stb_bra='tags/v1.1'
stb_vrs='1.1'

lst_inc='uavs3d.h'
lst_lib='libuavs3d'
lst_bin=''
lst_lic='COPYING'
lst_pc='uavs3d.pc'

. xbuilder.sh

start

# patch 01 source/CMakeLists.txt to support armv7 and dual static shared build
# patch 02 source/decore/threadpool.h remove pragma
<<'XB64_PATCH'
LS0tIHNvdXJjZS9DTWFrZUxpc3RzLnR4dAkyMDIyLTAxLTMwIDIyOjA5OjAyLjI4MTk1MTAwMCAr
MDAwMAorKysgc291cmNlL0NNYWtlTGlzdHMudHh0CTIwMjItMDEtMzAgMjI6MDk6MDMuNzgxOTUx
MDAwICswMDAwCkBAIC0xLDMgKzEsNCBAQAorCiBzZXQoTElCTkFNRSB1YXZzM2QpCiAKICMgY2hl
Y2sgY3B1CkBAIC00MiwxNyArNDMsMTcgQEAKICAgbGlzdChBUFBFTkQgVUFWUzNEX0FTTV9GSUxF
UyAke0RJUl9YODZfU1JDfSkKICAgbGlzdChBUFBFTkQgVUFWUzNEX0FTTV9GSUxFUyAke0RJUl9Y
ODZfMjU2X1NSQ30pCiBlbHNlaWYoIiR7VUFWUzNEX1RBUkdFVF9DUFV9IiBNQVRDSEVTICJhcm12
NyIpCi0gIGxpc3QoQVBQRU5EIFVBVlMzRF9BU01fRklMRVMgIi4vZGVjb3JlL2FybTY0L2FybXY3
LmMiKQotICBsaXN0KEFQUEVORCBVQVZTM0RfQVNNX0ZJTEVTICIuL2RlY29yZS9hcm02NC9hbGZf
YXJtdjcuUyIpCi0gIGxpc3QoQVBQRU5EIFVBVlMzRF9BU01fRklMRVMgIi4vZGVjb3JlL2FybTY0
L2RlYmxvY2tfYXJtdjcuUyIpCi0gIGxpc3QoQVBQRU5EIFVBVlMzRF9BU01fRklMRVMgIi4vZGVj
b3JlL2FybTY0L2RlZl9hcm12Ny5TIikKLSAgbGlzdChBUFBFTkQgVUFWUzNEX0FTTV9GSUxFUyAi
Li9kZWNvcmUvYXJtNjQvaW50ZXJfcHJlZF9hcm12Ny5TIikKLSAgbGlzdChBUFBFTkQgVUFWUzNE
X0FTTV9GSUxFUyAiLi9kZWNvcmUvYXJtNjQvaW50cmFfcHJlZF9hcm12Ny5TIikKLSAgbGlzdChB
UFBFTkQgVUFWUzNEX0FTTV9GSUxFUyAiLi9kZWNvcmUvYXJtNjQvZGN0Ml9hcm12Ny5TIikKLSAg
bGlzdChBUFBFTkQgVUFWUzNEX0FTTV9GSUxFUyAiLi9kZWNvcmUvYXJtNjQvaXRyYW5zX2RjdDhf
ZHN0N19hcm12Ny5TIikKLSAgbGlzdChBUFBFTkQgVUFWUzNEX0FTTV9GSUxFUyAiLi9kZWNvcmUv
YXJtNjQvcGl4ZWxfYXJtdjcuUyIpCi0gIGxpc3QoQVBQRU5EIFVBVlMzRF9BU01fRklMRVMgIi4v
ZGVjb3JlL2FybTY0L3Nhb19hcm12Ny5jIikKLSAgbGlzdChBUFBFTkQgVUFWUzNEX0FTTV9GSUxF
UyAiLi9kZWNvcmUvYXJtNjQvc2FvX2tlcm5lbF9hcm12Ny5TIikKKyAgbGlzdChBUFBFTkQgVUFW
UzNEX0FTTV9GSUxFUyAiLi9kZWNvcmUvYXJtdjcvYXJtdjcuYyIpCisgIGxpc3QoQVBQRU5EIFVB
VlMzRF9BU01fRklMRVMgIi4vZGVjb3JlL2FybXY3L2FsZl9hcm12Ny5TIikKKyAgbGlzdChBUFBF
TkQgVUFWUzNEX0FTTV9GSUxFUyAiLi9kZWNvcmUvYXJtdjcvZGVibG9ja19hcm12Ny5TIikKKyAg
bGlzdChBUFBFTkQgVUFWUzNEX0FTTV9GSUxFUyAiLi9kZWNvcmUvYXJtdjcvZGVmX2FybXY3LlMi
KQorICBsaXN0KEFQUEVORCBVQVZTM0RfQVNNX0ZJTEVTICIuL2RlY29yZS9hcm12Ny9pbnRlcl9w
cmVkX2FybXY3LlMiKQorICBsaXN0KEFQUEVORCBVQVZTM0RfQVNNX0ZJTEVTICIuL2RlY29yZS9h
cm12Ny9pbnRyYV9wcmVkX2FybXY3LlMiKQorICBsaXN0KEFQUEVORCBVQVZTM0RfQVNNX0ZJTEVT
ICIuL2RlY29yZS9hcm12Ny9kY3QyX2FybXY3LlMiKQorICBsaXN0KEFQUEVORCBVQVZTM0RfQVNN
X0ZJTEVTICIuL2RlY29yZS9hcm12Ny9pdHJhbnNfZGN0OF9kc3Q3X2FybXY3LlMiKQorICBsaXN0
KEFQUEVORCBVQVZTM0RfQVNNX0ZJTEVTICIuL2RlY29yZS9hcm12Ny9waXhlbF9hcm12Ny5TIikK
KyAgbGlzdChBUFBFTkQgVUFWUzNEX0FTTV9GSUxFUyAiLi9kZWNvcmUvYXJtdjcvc2FvX2FybXY3
LmMiKQorICBsaXN0KEFQUEVORCBVQVZTM0RfQVNNX0ZJTEVTICIuL2RlY29yZS9hcm12Ny9zYW9f
a2VybmVsX2FybXY3LlMiKQogCiAgIGFkZF9kZWZpbml0aW9ucygtRCBfYXJtdjdhKQogICBlbmFi
bGVfbGFuZ3VhZ2UoQVNNKQpAQCAtMTM1LDYgKzEzNiwxOCBAQAogdGFyZ2V0X2xpbmtfbGlicmFy
aWVzKCR7TElCTkFNRX0gcHRocmVhZCkKIGVuZGlmKCkKIAoraWYoQlVJTERfU0hBUkVEX0xJQlMg
QU5EIEJVSUxEX1NUQVRJQ19MSUJTKQorICBhZGRfbGlicmFyeSgke0xJQk5BTUV9LXN0YXRpYyBT
VEFUSUMgJHtESVJfVUFWUzNEX1NSQ30gJHtVQVZTM0RfQVNNX0ZJTEVTfSkKKyAgaWYgKE5PVCBN
U1ZDKQorICAgIHRhcmdldF9saW5rX2xpYnJhcmllcygke0xJQk5BTUV9LXN0YXRpYyBQUklWQVRF
IG0pCisgIGVuZGlmKCkKKyAgaWYoQ01BS0VfVVNFX1BUSFJFQURTX0lOSVQpCisgICAgdGFyZ2V0
X2xpbmtfbGlicmFyaWVzKCR7TElCTkFNRX0tc3RhdGljIFBSSVZBVEUgcHRocmVhZCkKKyAgZW5k
aWYoKQorICBzZXRfdGFyZ2V0X3Byb3BlcnRpZXMoJHtMSUJOQU1FfS1zdGF0aWMgUFJPUEVSVElF
UyBPVVRQVVRfTkFNRSAke0xJQk5BTUV9KQorICBpbnN0YWxsKFRBUkdFVFMgJHtMSUJOQU1FfS1z
dGF0aWMgTElCUkFSWSBERVNUSU5BVElPTiAke0NNQUtFX0lOU1RBTExfTElCX0RJUn0gQVJDSElW
RSBERVNUSU5BVElPTiAke0NNQUtFX0lOU1RBTExfTElCX0RJUn0pCitlbmRpZigpCisKICMgaW5z
dGFsbAogaW5zdGFsbChUQVJHRVRTIHVhdnMzZCBMSUJSQVJZIERFU1RJTkFUSU9OICR7Q01BS0Vf
SU5TVEFMTF9MSUJfRElSfSBBUkNISVZFIERFU1RJTkFUSU9OICR7Q01BS0VfSU5TVEFMTF9MSUJf
RElSfSkKIGluc3RhbGwoRklMRVMgZGVjb2Rlci91YXZzM2QuaCBERVNUSU5BVElPTiAke0NNQUtF
X0lOU1RBTExfSU5DTFVERV9ESVJ9KQoKLS0tIHNvdXJjZS9kZWNvcmUvdGhyZWFkcG9vbC5oCTIw
MjEtMTAtMzAgMjA6MDk6MjUuMDU3MDAwMDAwICswMTAwCisrKyBzb3VyY2UvZGVjb3JlL3RocmVh
ZHBvb2wuaAkyMDIxLTEwLTMwIDIwOjA5OjM5LjYyNTA0NjMwMCArMDEwMApAQCAtMTIsNyArMTIs
NyBAQAogI2luY2x1ZGUgIndpbjMydGhyZWFkLmgiCiAjZWxzZQogCi0jcHJhZ21hIGNvbW1lbnQo
bGliLCAicHRocmVhZFZDMi5saWIiKQorLy8jcHJhZ21hIGNvbW1lbnQobGliLCAicHRocmVhZFZD
Mi5saWIiKQogCiAjaW5jbHVkZSA8cHRocmVhZC5oPgogI2RlZmluZSB1YXZzM2RfcHRocmVhZF90
ICAgICAgICAgICAgICAgIHB0aHJlYWRfdAo=
XB64_PATCH

#!/bin/bash
# cpu av8 av7 x86 x64
# NDK ++   .   .   .  clang
# GNU  .   .   .   .  gcc
# WIN  .   .   .   .  clang/gcc

# Filelist
# --------
# include/uavs3d.h
# lib/pkgconfig/uavs3d.pc
# lib/libuavs3d.a
# lib/libuavs3d.so
# share/doc/uavs3d/COPYING
